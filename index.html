<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <style>
    body, html {
        height: 100%;
    }
    body{
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: blue; 
    }
    img{
        padding: 50px;
        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16),0 2px 10px 0 rgba(0, 0, 0, 0.12);
        background-color: white;
     } 
    </style>
</head>
<body>  
    <img id="cancela" src="" data-state"" alt=""> 

    <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-database.js"></script>

    <script>
        // Initialize Firebase
        // TODO: Replace with your project's customized code snippet
        var config = {
            apiKey: "AIzaSyBgba0BGq7tCYQ0UUbzMo-uZVjYqpnkN3Q",
            authDomain: "rele-iot.firebaseapp.com",
            databaseURL: "https://rele-iot.firebaseio.com",
            storageBucket: "rele-iot.appspot.com",

        };
        firebase.initializeApp(config);

        let cancela = document.querySelector('#cancela')
        cancela.addEventListener('click',  () =>{
            let estado = cancela.getAttribute('data-state');
            console.log(cancela);

            if (estado == 'off'){
                firebase.database().ref('cancela').set('on');
                  
            }else{
                firebase.database().ref('cancela').set('off');

                
            } 

        });

        firebase.database().ref('cancela').on('value', snapshot =>{
            let l = snapshot.val();
            if (l == 'on'){
                cancela.src = 'open_barrier-512.png';
                cancela.setAttribute('data-state', 'on');
       
            }else{
                cancela.src = 'closed_barrier-512.png';
                cancela.setAttribute('data-state', 'off');
            }
        } );

    </script>  
</body>

</html>